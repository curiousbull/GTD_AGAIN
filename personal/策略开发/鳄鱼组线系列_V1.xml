<?xml version="1.0" encoding="utf-8"?>
<root xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" SoftVersion="8.1.2.8" DBVersion="V2.6.2.14">
  <Funcs />
  <Tactics>
    <Tactic Code="Tang_Crocodile_V1" Name="汤赟的鳄鱼线策略" ShowMode="Main" FuncRetType="Void" SrcText="//------------------------------------------------------------------------&#xD;&#xA;// 简称: Tang_Crocodile_V1&#xD;&#xA;// 名称: 汤赟的鳄鱼线策略&#xD;&#xA;// 类别: 公式应用&#xD;&#xA;// 类型: 用户应用&#xD;&#xA;// 输出: Void&#xD;&#xA;//------------------------------------------------------------------------&#xD;&#xA;Params&#xD;&#xA;	// 分型回溯范围&#xD;&#xA;	Numeric Length_Up(5);&#xD;&#xA;	Numeric Length_Dn(5);&#xD;&#xA;	&#xD;&#xA;	// 鳄鱼线回溯范围与平移值&#xD;&#xA;	// 唇线&#xD;&#xA;	Numeric Length_A1(5);&#xD;&#xA;	Numeric Length_Disp1(3);&#xD;&#xA;	// 下齿线&#xD;&#xA;	Numeric Length_A2(8);&#xD;&#xA;	Numeric Length_Disp2(5);&#xD;&#xA;	// 下鄂线&#xD;&#xA;	Numeric Length_A3(13);&#xD;&#xA;	Numeric Length_Disp3(8);&#xD;&#xA;	&#xD;&#xA;	// 止损设置&#xD;&#xA;	// ATR周期&#xD;&#xA;	Numeric Length_ATR(21);&#xD;&#xA;	&#xD;&#xA;	// 开仓手数&#xD;&#xA;	Numeric Lots(0);&#xD;&#xA;&#xD;&#xA;Vars&#xD;&#xA;	// 分型&#xD;&#xA;	// 上分型回溯索引&#xD;&#xA;	Numeric Idx_Up;&#xD;&#xA;	// 下分型回溯索引&#xD;&#xA;	Numeric Idx_Dn;&#xD;&#xA;&#xD;&#xA;	// 鳄鱼线&#xD;&#xA;	// 唇线&#xD;&#xA;	NumericSeries A1;&#xD;&#xA;	// 齿线&#xD;&#xA;	NumericSeries A2;&#xD;&#xA;	// 下颚线&#xD;&#xA;	NumericSeries A3;&#xD;&#xA;	&#xD;&#xA;	// 止损设置&#xD;&#xA;	NumericSeries TR;&#xD;&#xA;	NumericSeries ATR;&#xD;&#xA;	&#xD;&#xA;Begin&#xD;&#xA;&#xD;&#xA;	// 分型定义&#xD;&#xA;	Extremes(High[1], Length_Up, True, Idx_Up); &#xD;&#xA;	Extremes(Low[1], Length_Dn, False, Idx_Dn); &#xD;&#xA;&#xD;&#xA;	// 鳄鱼线定义&#xD;&#xA;	A1 = XAverage(C[Length_Disp1], Length_A1);&#xD;&#xA;	A2 = XAverage(C[Length_Disp2], Length_A2);&#xD;&#xA;	A3 = XAverage(C[Length_Disp3], Length_A3);&#xD;&#xA;	&#xD;&#xA;	// 策略逻辑&#xD;&#xA;	// 多单进场&#xD;&#xA;	// 鳄鱼组线向上发散时， A1 &gt; A2 &gt; A3 且 A1 &gt; A1[1], A2 &gt; A2[1], A3 &gt; A3[1]&#xD;&#xA;	// 当前价格在鳄鱼组线之上，出现下分型，则在下分型的第三根K线开多&#xD;&#xA;	If(A1 &gt; A2 &amp;&amp; A2 &gt; A3 &amp;&amp; MarketPosition &lt;&gt; 1 &amp;&amp; Vol &gt; 0){&#xD;&#xA;		If(A1 &gt; A1[1] &amp;&amp; A2 &gt; A2[1] &amp;&amp; A3 &gt; A3[1]){&#xD;&#xA;			If(High &gt; A1 &amp;&amp; Idx_Dn == 2){&#xD;&#xA;				Buy(Lots, Max(Open, (A1+MinMove*PriceScale)));&#xD;&#xA;			}&#xD;&#xA;		}&#xD;&#xA;	}&#xD;&#xA;	&#xD;&#xA;	// 空单进场&#xD;&#xA;	// 鳄鱼组线向下发散时，A1 &lt; A2 &lt; A3 且 A1 &lt; A1[1], A2 &lt; A2[1], A3 &lt; A3[1]&#xD;&#xA;	// 当前价格在鳄鱼组线之下，出现上分型，则在上分型的第三根K线开空&#xD;&#xA;	If(A1 &lt; A2 &amp;&amp; A2 &lt; A3 &amp;&amp; MarketPosition &lt;&gt; -1 &amp;&amp; Vol &gt; 0){&#xD;&#xA;		If(A1 &lt; A1[1] &amp;&amp; A2 &lt; A2[1] &amp;&amp; A3 &lt; A3[1]){&#xD;&#xA;			If(Low &lt; A1 &amp;&amp; Idx_Up == 2){&#xD;&#xA;				SellShort(Lots, Min(Open, (A1 - MinMove*PriceScale)));&#xD;&#xA;			}&#xD;&#xA;		}&#xD;&#xA;	}&#xD;&#xA;	&#xD;&#xA;	// 止损&#xD;&#xA;	// 以21根K线的振幅平均值A为止损标的，当亏损得到2A时止损&#xD;&#xA;	TR = Max(Max((High-Low), Abs(High-Close[1])), Abs(Close[1]-Low));&#xD;&#xA;	ATR = XAverage(TR[1], Length_ATR);&#xD;&#xA;	&#xD;&#xA;	// 多头出场&#xD;&#xA;	If(MarketPosition == 1){&#xD;&#xA;		If(Low &lt; EntryPrice-2*ATR &amp;&amp; BarsSinceEntry &gt;= 1){&#xD;&#xA;			Sell(Lots, Min(Open,EntryPrice-2*ATR-MinMove*PriceScale));&#xD;&#xA;		}&#xD;&#xA;	}&#xD;&#xA;	&#xD;&#xA;	// 空头出场&#xD;&#xA;	If(MarketPosition == -1){&#xD;&#xA;		If(High &gt; EntryPrice+2*ATR &amp;&amp; BarsSinceEntry &gt;= 1){&#xD;&#xA;			BuyToCover(Lots, Max(Open, EntryPrice+2*ATR+MinMove*PriceScale));&#xD;&#xA;		}&#xD;&#xA;	}&#xD;&#xA;	&#xD;&#xA;	// 画出鳄鱼组线&#xD;&#xA;	PlotNumeric(&quot;唇线&quot;, A1);&#xD;&#xA;	PlotNumeric(&quot;下齿线&quot;, A2);&#xD;&#xA;	PlotNumeric(&quot;下鄂线&quot;, A3);&#xD;&#xA;	 &#xD;&#xA;End&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;//------------------------------------------------------------------------&#xD;&#xA;// 编译版本:	2017/05/19 200446&#xD;&#xA;// 内核版本:	V2.6.2.14&#xD;&#xA;// 版权所有	curiousbull&#xD;&#xA;// 更改声明	TradeBlazer Software保留对TradeBlazer平台&#xD;&#xA;//			每一版本的TradeBlazer公式修改和重写的权利&#xD;&#xA;//------------------------------------------------------------------------" IsEncry="false" md5Key="" FormulaVersion="V2.6.2.14">
      <IsSourceInfoUpdated>false</IsSourceInfoUpdated>
      <SerVarRefCount>0</SerVarRefCount>
      <IsSrcCodeEmpty>false</IsSrcCodeEmpty>
    </Tactic>
  </Tactics>
  <TacticSettings />
</root>